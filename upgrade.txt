This file contains notes for upgrades when special instructions are necessary. In general, simply doing an

hg pull -u

is all that's necessary. In the case that special instructions are needed, we will attempt to put them here, with the
most recent at the top.

We welcome a conversion of these notes to a better process using Fabric.

----------------------------

TODO:
 - Add west_state_cite to the UI (?) and to the Solr index.
 - Add judges
 - Add nature of suit
 - Add new fields to dumps, search_index, database, form fields, views, tests
 - Does the citation extractor re-save the document in Solr -- i.e., do we get the citation counts after a standard
   crawl into Solr?
 - Check that apache works properly
 - Sort out getting rid of the *:* at last

2013-06-24:
 - judges and nature_of_suit have been added to the Document model. Please migrate with:

     manage.py migrate search

 - We've moved to using django.contrib.staticfiles[1]. This introduces better management of static files and moves CL
   towards standard Django practices in versions >= 1.3, but presents several changes for the project:
    - When deploying, if there are new commands that must be run XXX
    - The locations of static files have been distributed to either the app they correspond with or to a new directory,
      "alert/assets/static-global", that contains static items that have a global scope across apps. Within each app
      there is a /static/ directory where their own static files should go. Files are not served from these locations,
      but are instead collected into the "alert/assets/static/" directory upon deploying the app.
    - Changes have been made to the apache configuration which will make it serve files from the new location. These
      changes require that Apache be restarted after pulling from hg. TODO: Is this true?
    - urls.py has been simplified, since django.contrib.staticfiles serves static files easily when
      settings['DEBUG'] = True.
    - Nearly all templates have been altered to use this app, introducing the possibility of missing images, css or JS.

 [1]: https://docs.djangoproject.com/en/1.3/howto/static-files/#staticfiles-in-templates


2013-06-20:
 - The add_citations script has been converted to a management command. Any previous usages of it will need to be
   updated to use manage.py cl_add_citations_to_docs. It remains mostly API compatible, but management commands do
   not support variable numbers of arguments so the doc_ids parameter is now doc_id. It takes an int instead of an
   iterable.

2013-06-19:
 - Numerous changes to the models have been made to rename variables. Please update your database after pulling the
   code. This should be an instant migration in PostGres.

   manage.py migrate search

 - The dependency on the requests library has been updated to version 1.2.3:

   sudo pip uninstall requests
   sudo apt-get purge python-requests
   sudo pip install requests==1.2.3

 - The scrape_and_extract.py script has been converted to the cl_scrape_and_extract management command. It is API
   compatible in terms of args, but any jobs calling the script will need to be updated.




