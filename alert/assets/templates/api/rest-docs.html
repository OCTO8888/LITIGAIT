{% extends "base.html" %}

{% block title %}REST API - CourtListener.com{% endblock %}
{% block search-form %}{% endblock %}

{% block sidebar %}{% endblock %}

{% block content %}
    <div class="span-13 append-2">
        <h2 id="about">REST API &ndash; Alpha</h2>
        <p>For developers that wish to have a more granular API for our data, we provide a RESTful API
            based on the <a href="http://django-tastypie.readthedocs.org/en/latest/">tastypie toolkit</a>.
        </p>

        <p class="notice">This API is currently in alpha until we are able to test it sufficiently. We hope to
            give it a nice version bump soon. Until then, if you're using it, please give us your feedback.
        </p>

        <p>
            This API currently has five endpoints that can be consumed via GET requests:
        </p>

        <ol>
            <li><a href="/api/rest/v1/opinion/">/api/rest/v1/opinion/</a></li>
            <li><a href="/api/rest/v1/citation/">/api/rest/v1/citation/</a></li>
            <li><a href="/api/rest/v1/jurisdiction/">/api/rest/v1/jurisdiction/</a></li>
            <li><a href="/api/rest/v1/search/">/api/rest/v1/search/</a></li>
            <li><a href="/api/rest/v1/coverage/">/api/rest/v1/coverage/</a></li>
        </ol>

        <p>
            These endpoints can be used in combination to make sophisticated queries against our database or our
            search engine and are described in detail below. With the exception of the coverage endpoint, each of these
            have schema documents associated with them that can be found by appending "schema" to their location (e.g.
            <a href="/api/rest/v1/opinion/schema/">/api/rest/v1/opinion/schema/</a>).
        </p>

        <h3>Overview of Endpoints</h3>
        <p>
            This section explains general principles of the API and rules that apply to all of our RESTful endpoints.
        </p>

        <h4>Authentication</h4>
        <p>
            With the exception of the coverage endpoint, all of the endpoints use either
            <a href="http://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic Authentication</a> or
            Django Session Authentication. To use the API, you must therefore either be logged into the CourtListener
            website (Session Authentication) or you must use your CourtListener credentials to set up HTTP Basic
            Authentication. Both of these authentication mechanisms protect your credentials on the wire via HTTPS.
        </p>
        <p>
            Authentication is necessary so we can monitor usage of the system and so we can assist with any errors that
            may occur. Per our <a href="/terms/#privacy">privacy policy</a>, we do not track your queries in the API,
            though we may collect statistical information for system monitoring.
        </p>

        <h4>Serialization Formats</h4>
        <p>
            With the exception of the coverage endpoint (which is only available as JSON), requests may be serialized
            as JSON, JSONP, or XML, with JSON as the default. The format you wish to receive may be requested via the
            HTTP Accept header or via the <code>format</code> GET parameter.
        </p>
        <p>
            Note that because your browser prioritizes <code>application/xml</code> over <code>application/json</code>,
            you'll always receive XML when using your browser to explore our APIs. If you wish to override this, you
            may wish to use a less opinionated way of GETting resources such as cURL or you can override it using the
            <code>format</code> GET parameter, like so:
        </p>
        <blockquote>
            <code>https://www.courtlistener.com/api/rest/v1/opinion/?<strong>format=json</strong></code>
        </blockquote>

        <p>
            If you wish to receive XML via a tool such as cURL, set the Accept header manually, like so:
        </p>
        <blockquote>
            <code>curl <strong>-H "Accept: application/xml"</strong> https://www.courtlistener.com/api/rest/v1/opinion/</code>
        </blockquote>

        <h4>Views, Pagination and Subset Selection</h4>
        <p>
            Each endpoint provides a list view, a detail view and a set view. The <em>list</em> view is what you see
            when you visit an endpoint, when it shows a list of 20 results.  The <em>detail</em> view shows all meta
            data for a single result and can be viewed by following the <code>resource_uri</code> field for a result on
            the list view. Occasionally, content is excluded from the list view for performance reasons, but it may be
            available on the detail view. With the exception of the coverage API, links to the next and previous pages
            are available in the <code>meta</code> section of the results.
        </p>
        <p>
            A subset of results may be selected by using the <em>set</em> view, and separating the IDs you wish to
            receive with semi-colons. For example this returns three jurisdictions using the <code>jurisdiction</code>
            endpoint:
        </p>
        <blockquote>
            <code>curl "https://www.courtlistener.com/api/rest/v1/jurisdiction/set/scotus;ca9;cal"</code>
        </blockquote>
        <p>
            Note that we use quotation marks in this query in order to escape shell interpretation of the semicolons.
        </p>
        <h4>Filtering</h4>
        <p>
            With the exception of the coverage endpoint, each endpoint can be filtered and sorted in various ways, as
            defined in their schema (available at <code>/api/rest/v1/$endpoint/schema/</code>). In the schemas you will
            find rules defining how each field can be filtered. These correspond to the
            <a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#field-lookups">field lookups in the
            Django Queryset API</a>. If a field has <code>1</code> as its available rule, that indicates that
            <em>all</em> Django Queryset field lookups are available on that field.
        </p>
        <p>
            Field lookups can be used by appending them to a field with a double underscore as a separator (examples
            are below in the documentation for various endpoints).
        </p>
        <h4>Sorting</h4>
        <p>
            With the exception of the coverage endpoint, sorting can be done on fields defined in the <em>ordering</em>
            section of an endpoint's schema. Sorting is done using the <code>order_by</code> GET parameter, with
            descending sorting available by prepending the minus sign (e.g. <code>order_by=-date_modified</code>). In
            the <em>search</em> endpoint, sorting is instead done using the <code>sort</code> parameter, as described
            in detail below.
        </p>
        <h4>Field Selection</h4>
        <p>
            To save bandwidth and speed up your queries, fields can be limited by using the <code>fields</code> GET
            parameter with a comma-separated list of fields you wish to receive. For example, if you wish to only
            receive the <code>resource_uri</code> and <code>absolute_url</code> fields from the <code>opinion</code>
            endpoint you could do so with:
        </p>
        <blockquote>
            <code>curl https://www.courtlistener.com/api/rest/v1/opinion/?<strong>fields=absolute_url,resource_uri</strong></code>
        </blockquote>
        <p>
            This could save you time and bandwidth if you are making numerous requests.
        </p>

        <h4>Date Formats</h4>
        <p>
            As <a href="http://xkcd.com/1179/">required</a>, all date formats are set to
            <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601 format</a>.
        </p>

        <h4>Limitations</h4>
        <p>
            At present, this API is throttled to 1,000 queries per endpoint per user per hour, while we learn where our
            performance bottlenecks are. If you are hitting this limit or anticipate doing so, please get in touch so
            we can investigate easing your thresholds.
        </p>

        <h4>Upgrades and Fixes</h4>
        <p>
            Like the rest of the CourtListener platform, this API and its documentation are
            <a href="https://bitbucket.org/mlissner/search-and-awareness-platform-courtlistener/src/tip/alert/search/api.py?at=default">open
            source</a>. If it lacks functionality that you desire or if you find these notes lacking, pull requests
            providing improvements are very welcome. Just get in touch in
            <a href="http://lists.freelawproject.org/cgi-bin/mailman/listinfo/dev">our developer forum</a> to discuss
            your ideas.
        </p>


        <h3 id="opinion-endpoint">/api/rest/v1/opinion/</h3>
        <p>
            This can be considered the main endpoint for many users. It provides access to the opinions in our database
            and can be filtered or sorted in various ways as mentioned above. As with all endpoints, field descriptions
            can be found in the schema document. Visiting this endpoint provides the metadata for 20 opinions at a
            time. The full text of the opinions may be found by visiting their detail page, which can be found by
            following the <code>resource_uri</code> attribute for a result. Full text is not provided by default to
            save on bandwidth and processing.
        </p>
        <p>
            The results at this endpoint can be filtered by a number of fields. Among others, this includes filtering
            by:
        </p>
        <ul>
            <li><code>blocked</code>: Whether the opinion should be blocked from search engines.</li>
            <li><code>citation_count</code>: The number of times the opinion has been cited by other opinions.</li>
            <li><code>court</code>: The ID of the court where the opinion was written.</li>
            <li><code>date_filed</code>: The date the opinion was filed by the court.</li>
            <li><code>date_modified</code>: The date and time the opinion was last modified.</li>
            <li><code>extracted_by_ocr</code>: Whether the text of the opinion was extracted from an image using OCR.</li>
            <li><code>precedential_status</code>: Whether the opinion has precedential value.</li>
            <li><code>time_retrieved</code>: The date and time the opinion was added to our system.</li>
        </ul>
        <p>
            For the full list of filtering fields, see the <em>filtering</em> section of the
            <a href="/api/rest/v1/opinion/schema/">schema document</a>.
        </p>
        <p>
            As mentioned above, in the schema document, you will find that each filtering field provides a list of
            field lookups that are available to it. The following query provides an example of these lookups in
            use. Observe the following query, which gets all items that were modified after June 9th, 2013
            (<code>__gt</code>), ordered by <code>date_modified</code> (ascending).
        </p>
        <blockquote>
            <code>curl https://www.courtlistener.com/api/rest/v1/opinion/?<strong>date_modified__gt=2013-06-09+00:00Z&order_by=date_modified</strong></code>
        </blockquote>
        <p>
            And remember, to flip the sorting, you can use a minus sign in your ordering argument
            (<code>order_by=<strong>-</strong>date_modified</code>).
        </p>
        <p>
            The results of this endpoint can also be sorted by <code>time_retrieved</code>, <code>date_modified</code>,
            <code>date_filed</code>, <code>pagerank</code>, or <code>date_blocked</code>. Again, this is described in
            more detail in the schema.
        </p>


        <h3 id="citation-endpoint">/api/rest/v1/citation/</h3>
        <p>
            This endpoint is integrated into the <code>/opinion/</code> endpoint and is also available individually.
            This endpoint provides each of the many citations that an opinion can have. Since opinions are often included
            in several written reporters, there are fields in this model for numerous
            <a href="http://legalresearchprinciples.pbworks.com/w/page/16129937/Parallel%20Citations">parallel
            citations</a>. After several years reorganizing our schema, we currently categorize citations into the
            following types:
        </p>
        <ul>
            <li>Neutral (e.g. 2013 FL 1)</li>
            <li>Federal (e.g. 5 F. 55)</li>
            <li>State (e.g. Alabama Reports </li>
            <li>Regional (e.g. Atlantic Reporter)</li>
            <li>Specialty (e.g. Lawyers' Edition)</li>
            <li>Old Supreme Court (e.g. 5 Black. 55)</li>
            <li>Lexis or West (e.g. 5 LEXIS 55, or 5 WL 55)</li>
        </ul>
        <p>
            Some opinions have multiple citations of a given type, and to support those instances we provide several
            fields of that type. For example, we have fields for <code>federal_cite_one</code>,
            <code>federal_cite_two</code>, and <code>federal_cite_three</code>, which together can hold three parallel
            federal citations for a single opinion.
        </p>
        <p>
            All of the filtering, sorting and field lookups described above can be used on this endpoint, as described
            in its <a href="/api/rest/v1/citation/schema/">schema</a>. This endpoint also provides a field called
            <code>opinion_uris</code>, which references the parent opinion for a citation.
        </p>
        <p>
            At present for performance reasons it is not possible to filter based on a citation. For this purpose, we
            recommend the <a href="#search-endpoint">search endpoint</a>.
        </p>


        <h3 id="jurisdiction-endpoint">/api/rest/v1/jurisdiction/</h3>
        <p>
            This is the simplest of our REST endpoints and currently provides basic information about the
            <strong>{{ court_count }}</strong> jurisdictions in the American court system that we support.
        </p>
        <p>
            This endpoint can be filtered or sorted in numerous ways as described in its
            <a href="/api/rest/v1/jurisdiction/schema/">schema</a>. Brief descriptions of the fields can be found there
            as well.
        </p>

        <h3 id="search-endpoint">/api/rest/v1/search/</h3>
        <p>
            This endpoint allows you to query our search engine along the same lines as is possible in our front end.
            Because this endpoint does not use the Django models directly, the fields and results from this endpoint are
            slightly different than those in the other endpoints. For example, instead of using <code>order_by</code>
            for ordering, it uses <code>sort</code> (see <a href="/api/rest/v1/search/schema/">the schema</a> for
            sorting options).
        </p>
        <p>
            Similarly, since this endpoint hits against a Solr search index instead of a database, the filtering works
            slightly differently. To filter on this endpoint, we recommend identifying an effective query on the front
            end that generates the results you desire. Using that query (and variations thereof), it is possible to
            easily apply it to this endpoint.
        </p>
        <p>
            When examinine the <em>filtering</em> section of the schema, note that fields have been labeled as follows:
        </p>
        <dl>
            <dt>search</dt>
            <dd>
                These fields are filterable according to the syntax defined in the
                <a href="/search/advanced-techniques/">advanced query techniques</a> available on the front end.
            </dd>
            <dt>int</dt>
            <dd>
                These fields require ints as their arguments, and generally provide greater-than or less-than
                queries
            </dd>
            <dt>date</dt>
            <dd>
                These fields allow you to search for dates greater than or less than a given value. Input dates ascribe
                to ISO-8601 format, however, partial dates are allowed, and will be interpreted appropriately. For
                example, placing "2012" in the <code>filed_after</code> parameter will assume you mean opinions after
                "2012-01-01".
            </dd>
            <dt>Boolean</dt>
            <dd>
                Only the stat_* field is currently available as boolean. This field is represented by a checkboxes in
                the front end, and can be enabled by setting its value to "on". For example to include only
                Precedential documents, you might place a query like:
                <blockquote>
                    <code>curl https://www.courtlistener.com/api/rest/v1/search/?<strong>stat_Precedential=on</strong></code>
                </blockquote>
            </dd>
            <dt>CSV</dt>
            <dd>
                The <code>courts</code> field is currently available as a list of comma separated values (CSV). Thus to
                request multiple courts, you can simply separate their IDs with a comma. For example to get all
                documents from the Supreme Court (<code>scotus</code>) and the Ninth Circuit of Appeals
                (<code>ca9</code>), you would make a query like:
                <blockquote>
                    <code>curl https://www.courtlistener.com/api/rest/v1/search/?<strong>courts=scotus,ca9</strong></code>
                </blockquote>
                IDs for all jurisdictions are in the sidebar.
            </dd>
        </dl>


        <h3 id="coverage-endpoint">/api/rest/v1/coverage/</h3>
        <p>
            Unlike the other endpoints in this API, the coverage endpoint is not based on the tastypie API framework. As
            a result it is much simpler, only providing data in a very specific manner, serialized as JSON. In the
            future we expect to expand this API to provide faceting along additional fields, but at present it simply
            provides jurisdiction counts by year for any requested jurisdiction. This API does not require
            authentication and is what powers our live <a href="/coverage/">coverage page</a>.
        </p>
        <p>
            To receive jurisdiction counts by year, simply provide the jurisdiction ID you wish to query or the special
            keyword, "all", which returns counts for all jurisdictions. For example, this provides annual counts for the Ninth
            Circuit of Appeals (<code>ca9</code>):
        </p>
        <blockquote>
            <code>curl https://www.courtlistener.com/api/rest/v1/coverage/ca9/</code>
        </blockquote>


    </div>



    <div class="span-9 last">
        <div class="span-9 last sidebar-section">
            <h3><span>Available Jurisdictions</span></h3>
            <p>
                We currently have <strong>{{ court_count }}</strong> jurisdictions that can be accessed with our APIs.
                Details about the jurisdictions that are available can be found <a href="/api/jurisdictions/">here</a>.
            </p>
            <p>Below is a cheat sheet listing the abbreviations for all available jurisdictions.</p>
            <div id="scrollable-jurisdictions">
                <table class="settings-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th title="Gathered from Blue Book, Cornell.edu and ALWD">Abbreviation</th>
                            <th title="The number of cases in this jurisdiction on CourtListener">Count</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for court in courts %}
                        <tr>
                            <td>{{ court.full_name }}</td>
                            <td>
                                <a href="/?q=&court_{{ court.pk }}=on&sort=score+desc">
                                    {{ court.pk }}
                                </a>
                            </td>
                            <td>{{ court.count }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="span-9 last sidebar-section">
            <h3><span>Powered By</span></h3>
            <p>
                If you are interested, we have a variety of <a href="http://freelawproject.org/about/assets/">"Powered
                By" logos</a> available for your website or application. We appreciate a reference, but it's not required.
            </p>

            <a href="http://freelawproject.org/about/assets/"><img src="/static/png/logo-long-w350.png" width="350" height="81"></a>

        </div>

        <div class="span-9 last sidebar-section">
            <h3><span>Browser Tools</span></h3>
            <p>
                If you are using the Firefox browser, you may be interested in the
                <a href="https://addons.mozilla.org/en-US/firefox/addon/jsonovich/">JSONovitch extension</a> which
                provides pretty printing of JSON in your browser.
            </p>
        </div>
        <div class="span-9 last sidebar-section">
            <h3 id="copyright"><span>Copyright</span></h3>
            <p>
                Our data is free of known copyright restrictions.<br />
                <a rel="license" href="http://creativecommons.org/publicdomain/mark/1.0/">
                    <img src="https://i.creativecommons.org/p/mark/1.0/88x31.png" alt="Public Domain Mark" height="31" width="88"/>
                </a>
            </p>
        </div>
    </div>
{% endblock %}
