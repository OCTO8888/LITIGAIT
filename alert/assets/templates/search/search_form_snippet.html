{% load humanize %}
{% load widget_tweaks %}

<form action="/" method="get" id="search-form">
    <div id="search-container">
        <table>
            <tbody>
            <tr>
                <td>
                    <input class="{% if count == 0 or error %}auto-focus{% endif %} wide-title"
                           value="{{ search_form.q.value|default:'' }}"
                           name="q"
                           id="id_q"
                           autocomplete="off"
                           type="text"
                           tabindex="5">
                </td>
                <td>
                    <button type="submit"
                            class="button title"
                            name="search"
                            id="search-button"
                            tabindex="6">Search
                    </button>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <div class="left">
                        <a href="/search/advanced-techniques/" id="advanced" tabindex="8">Advanced</a>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
        {% if not error %}
            <div id="extra-search-fields">
                {{ search_form.order_by }}
                <div id="extra-sidebar-fields">
                    {#  Modal is at bottom of results, so it loads last. #}
                    <div class="pointer"
                         data-toggle="modal"
                         data-target="#court-picker">
                        <h4 class="bottom">
                            Select Jurisdictions <i class="gray fa fa-external-link"></i>
                        </h4>
                        <p class="bottom">{{ court_count }} jurisdictions selected</p>
                    </div>
                    <hr class="space">
                    <h4 class="bottom">Case name</h4>
                    <p class="bottom span-6">{{ search_form.case_name }}</p>
                    <h4 class="bottom">Judge</h4>
                    <p class="bottom span-6">{{ search_form.judge }}</p>
                    <hr class="space">
                    <h4 class="bottom">Precedential Status</h4>
                    {% for status in status_facets %}
                        <div class="sidebar-checkbox">
                            <input
                                    id="id_{{ status.1 }}"
                                    type="checkbox"
                                    name="{{ status.1 }}"
                                    class="external-input status-checkbox left"
                                    {% if status.3 %}checked="checked"{% endif %}>
                            <label
                                    for="id_{{ status.1 }}"
                                    class="pointer {% if status.2 == 0 %}gray{% endif %}">
                                <div>{{ status.0 }}&nbsp;<span class="gray small">({{ status.2|intcomma }})</span></div>
                            </label>
                        </div>
                    {% endfor %}
                    <hr class="space">
                    <h4 class="bottom">Filed After</h4>
                    <p class="bottom span-6">{{ search_form.filed_after }}</p>
                    <h4 class="bottom">Filed Before</h4>
                    <p class="bottom span-6">{{ search_form.filed_before }}</p>

                    <hr class="space">
                    <h4 class="bottom">Citation</h4>
                    <p class="bottom">{{ search_form.citation }}</p>
                    <h4 class="bottom">Neutral Citation</h4>
                    <p class="bottom">{{ search_form.neutral_cite }}</p>
                    <h4 class="bottom">Docket Number</h4>
                    <p class="bottom">{{ search_form.docket_number }}</p>

                    <div class="span-5">
                        {{ search_form.cited_gt }}
                        {{ search_form.cited_lt }}
                        <h4 class="bottom inline">Citation Count</h4>
                        <span type="text" id="citation-count" class="gray small bottom">(Any)</span>
                    </div>
                    <div id="slider-range" class="span-5 bottom"></div>

                    <button type="submit"
                            class="button title span-5"
                            name="search">Search</button>
                </div>
            </div>
        {% endif %}
        {# search_form #}
    </div>
</form>
